---
environment: "prd"
cluster_name: "nft-api-prd-cluster"
notification_channels:
  infrastructure:
    ecs: "slack-dd-ecs-alerts-p1"
    alb: "slack-dd-elb-alerts-p1"
    rds: "slack-dd-rds-alerts-p1"
  messaging:
    sns: "slack-dd-sns-alerts-p1"
    sqs: "slack-dd-sqs-alerts-p1"
  application:
    java: "slack-dd-apm-alerts-p1"
    node: "slack-dd-apm-alerts-p1"
    apm: "slack-dd-apm-alerts-p1"
  logs: "slack-dd-logs-alerts-p1"
  default: "slack-dd-ecs-alerts-p1"

threshold_overrides:
  infrastructure:
    nft-api:
      cpu_percent: 90
      memory_percent: 90
      memory_available: 2048
      network_errors: 10
      alert_settings:
        priority: "4"
    nft-api-workers:
      cpu_percent: 90
      memory_percent: 90
      memory_available: 4096
      network_errors: 15
      alert_settings:
        priority: "3"
    alb:
      nft-api:
        alb_name: "app/nft-api-prd-external/63dc6b93a026907c"
        request_count: 25000
        latency: 300
        error_rate: 10
        alert_settings:
          priority: "2"
    db:
      nft-api:
        cpu_percent: 75
        memory_threshold: 300
        connection_threshold: 90
        type: "aurora"
        identifier: "nft-api-prd-rds"
        alert_settings:
          priority: "1"
  messaging:
    sqs:
      enabled: true
      nft-api-application-events:
        queue_name: "nft-api-application-events-prd"
        dlq_name: "nft-api-application-events-dlq-prd"
        age_threshold: 400
        depth_threshold: 1500
        dlq_threshold: 1
        alert_settings:
          priority: "2"
    sns:
      enabled: false
  application:
    apm:
      enabled: true
      services:
        nft-api:
          thresholds:
            latency: 150
            error_rate: 5
            throughput: 90
          alert_settings:
            priority: "2"
        nft-api-workers:
          thresholds:
            latency: 220
            error_rate: 5
            throughput: 110
          alert_settings:
            priority: "2"
    java:
      enabled: true
      services:
        nft-api:
          jvm:
            thresholds:
              jvm_memory_used: 2048
            alert_settings:
              priority: "2"
        nft-api-workers:
          jvm:
            thresholds:
              jvm_memory_used: 4096
            alert_settings:
              priority: "2"
  logs:
    services:
      nft-api:
        thresholds:
          critical: 25
          critical_recovery: 20
          warning: 15
          warning_recovery: 10
      nft-api-workers:
        thresholds:
          critical: 25
          critical_recovery: 20
          warning: 15
          warning_recovery: 10
